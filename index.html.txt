<!DOCTYPE html>
<html lang="en">
<script>
  // SW & Cache hart entfernen, bevor die App lädt
  (async () => {
    try {
      if ('serviceWorker' in navigator) {
        const regs = await navigator.serviceWorker.getRegistrations();
        await Promise.all(regs.map(r => r.unregister()));
      }
      if (window.caches && caches.keys) {
        const keys = await caches.keys();
        await Promise.all(keys.map(k => caches.delete(k)));
      }
    } catch (e) {
      console.warn('SW cleanup warn:', e);
    }
    // Ein extra Cache-Buster für Assets
    const u = new URL(location.href);
    u.searchParams.set('v', Date.now().toString());
    history.replaceState(null, '', u.toString());
  })();
</script>

  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- PWA Manifest + Theme -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#2563eb" />

    <title>Zeiterfassung</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js')
      .then(() => console.log("Service Worker registriert"))
      .catch((err) => console.error("SW Fehler:", err));
  }
</script>
</body>
</html>
